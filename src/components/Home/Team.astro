---
// src/components/TeamSection.astro
import Abrorbek from "../../assets/images/Abrorbek.png";
import Husniddin from "../../assets/images/Husniddin.png";
import Mirovskiy from "../../assets/images/Mirovskiy.png";
import Alexandr from "../../assets/images/Alexandr.png";
import AlexandrMirovskiy from "../../assets/images/Alexandr Mirovskiy.png";
---

<div class="py-12 sm:py-16 lg:py-[80px] mb-16 px-4">
  <!-- Desktop Grid Layout -->
  <div class="hidden md:grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 lg:gap-[16px]">
    {[
      { img: Abrorbek, name: 'Abrobek Ibrohimov', height: 'h-[250px]' },
      { img: Husniddin, name: 'Husniddin Ahmadjonov', height: 'h-[311px]' },
      { img: Mirovskiy, name: 'Aleksandr Mirovskiy', height: 'h-[288px]' },
      { img: Alexandr, name: 'Aleksandr Mirovskiy', height: 'h-[254px]' },
      { img: AlexandrMirovskiy, name: 'Aleksandr Mirovskiy', height: 'h-[311px]' }
    ].map(({ img, name, height }) => (
      <div class="flex flex-col items-center justify-between">
        <div class={`w-full aspect-[4/5] overflow-hidden mb-2 ${height}`}>  
          <img
            src={img.src}
            alt={name}
            class="w-full rounded-[24px] object-cover"
          />
        </div>
        <p class="text-center text-sm font-medium font-inter-tight">{name}</p>
      </div>
    ))}
  </div>

  <!-- Mobile Slider Layout -->
  <div class="md:hidden relative">
    <div id="slider" class="flex overflow-x-auto hide-scrollbar scroll-smooth gap-4 pb-4">
      {[
        { img: Abrorbek, name: 'Abrobek Ibrohimov', height: 'h-[250px]' },
        { img: Husniddin, name: 'Husniddin Ahmadjonov', height: 'h-[311px]' },
        { img: Mirovskiy, name: 'Aleksandr Mirovskiy', height: 'h-[288px]' },
        { img: Alexandr, name: 'Aleksandr Mirovskiy', height: 'h-[254px]' },
        { img: AlexandrMirovskiy, name: 'Aleksandr Mirovskiy', height: 'h-[311px]' }
      ].map(({ img, name, height }, idx) => (
        <div key={idx} class="flex-none w-48 flex flex-col items-center">
          <div class={`w-full aspect-[4/5] mb-2 ${height}`}>  
            <img
              src={img.src}
              alt={name}
              class="w-full rounded-[24px] object-cover"
            />
          </div>
          <p class="text-center text-sm font-medium font-inter-tight">{name}</p>
        </div>
      ))}
    </div>

    <!-- Navigation Arrows -->
    <button id="prevBtn" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-2 bg-white rounded-full p-2 shadow-lg border border-gray-200 hover:bg-gray-50 transition-colors">
      <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <button id="nextBtn" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-2 bg-white rounded-full p-2 shadow-lg border border-gray-200 hover:bg-gray-50 transition-colors">
      <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>

    <!-- Dots -->
    <div class="flex justify-center mt-6 space-x-2">
      {Array.from({ length: 5 }).map((_, i) => (
        <button key={i} class="dot w-2 h-2 rounded-full bg-gray-300 hover:bg-gray-400 transition-colors" data-slide={i}></button>
      ))}
    </div>
  </div>

  <script is:inline>
    const slider = document.getElementById('slider');
    const dots   = Array.from(document.querySelectorAll('.dot'));
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    let currentSlide = 0;
    const slideWidth = 200; // w-48 (192px) + gap (8px)
    const totalSlides = 5;

    function updateDots() {
      dots.forEach((dot, idx) => {
        dot.classList.toggle('bg-blue-500', idx === currentSlide);
        dot.classList.toggle('bg-gray-300', idx !== currentSlide);
      });
    }
    function goToSlide(index) {
      currentSlide = index;
      slider.scrollTo({ left: index * slideWidth, behavior: 'smooth' });
      updateDots();
    }
    nextBtn.addEventListener('click', () => goToSlide((currentSlide + 1) % totalSlides));
    prevBtn.addEventListener('click', () => goToSlide((currentSlide - 1 + totalSlides) % totalSlides));
    dots.forEach((dot, idx) => dot.addEventListener('click', () => goToSlide(idx)));

    // Swipe Support & Auto-play can be added similarly if needed
  </script>
</div>
